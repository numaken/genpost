#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Generator Adapters - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹å®Œæˆç‰ˆ
"""

import logging
import random
import os
import requests
from typing import Optional, Any
from core.config import config
from core.prompt_manager import PromptManager

# æ—¢å­˜ã®é–¢æ•°ãƒ™ãƒ¼ã‚¹ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
try:
    from modules.wordpress.generator import generate_and_post as wp_generate
    from modules.javascript.generator import generate_and_post_js as js_generate
    from modules.python.generator import generate_and_post_python as py_generate
except ImportError:
    try:
        from modules.python.generator import generate_and_post as py_generate
    except ImportError:
        py_generate = None

try:
    from modules.react.generator import generate_and_post_react as react_generate
except ImportError:
    try:
        from modules.react.generator import generate_and_post as react_generate
    except ImportError:
        react_generate = None

try:
    from modules.vue.generator import generate_and_post_vue as vue_generate
except ImportError:
    try:
        from modules.vue.generator import generate_and_post as vue_generate
    except ImportError:
        vue_generate = None

logging.basicConfig(
    level=logging.INFO,
    format='[%(asctime)s] %(levelname)s: %(message)s',
    datefmt='%Y-%m-%d %H:%M:%S'
)

class BaseGeneratorAdapter:
    """ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®åŸºåº•ã‚¯ãƒ©ã‚¹ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†å¯¾å¿œç‰ˆï¼‰"""
    
    def __init__(self, technology: str):
        self.technology = technology
        self.generated_count = 0
        self.prompt_manager = PromptManager()
        logging.info(f"ğŸ¯ {technology} ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼åˆæœŸåŒ–ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†å¯¾å¿œï¼‰")
    
    def generate_article(self, topic: Optional[str] = None, prompt_pack: str = "default") -> bool:
        """è¨˜äº‹ç”Ÿæˆãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å¯¾å¿œç‰ˆï¼‰"""
        raise NotImplementedError("Subclass must implement generate_article method")
    
    def _generate_with_custom_prompt(self, topic: str, custom_prompt: str) -> bool:
        """ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§è¨˜äº‹ç”Ÿæˆï¼ˆå…±é€šãƒ­ã‚¸ãƒƒã‚¯ï¼‰"""
        try:
            original_topic = os.environ.get("SINGLE_TOPIC")
            os.environ["SINGLE_TOPIC"] = topic
            
            payload = {
                "model": "gpt-3.5-turbo",
                "messages": [
                    {"role": "system", "content": custom_prompt},
                    {"role": "user", "content": f"ã€Œ{topic}ã€ã«ã¤ã„ã¦è¨˜äº‹ã‚’æ›¸ã„ã¦ãã ã•ã„"}
                ],
                "temperature": 0.8,
                "max_tokens": 2000,
            }
            
            response = requests.post(
                "https://api.openai.com/v1/chat/completions",
                headers=config.get_openai_headers(),
                json=payload,
                timeout=60
            )
            
            if response.status_code == 200:
                data = response.json()
                article_content = data["choices"][0]["message"]["content"]
                logging.info(f"âœ… ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨˜äº‹ç”ŸæˆæˆåŠŸ: {topic}")
                return True
            else:
                logging.error(f"OpenAI API ã‚¨ãƒ©ãƒ¼: {response.status_code}")
                return False
                
        except Exception as e:
            logging.error(f"ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨˜äº‹ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {e}")
            return False
        finally:
            if original_topic is not None:
                os.environ["SINGLE_TOPIC"] = original_topic
            elif "SINGLE_TOPIC" in os.environ:
                del os.environ["SINGLE_TOPIC"]


class WordPressGenerator(BaseGeneratorAdapter):
    """WordPress ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å®Œå…¨å¯¾å¿œç‰ˆï¼‰"""
    
    def __init__(self):
        super().__init__("WordPress")
        self.generate_function = wp_generate
        
        self.default_topics = [
            "WordPressã§ã‚«ã‚¹ã‚¿ãƒ æŠ•ç¨¿ã‚¿ã‚¤ãƒ—ã‚’ä½œæˆã™ã‚‹æ–¹æ³•",
            "WordPressãƒ•ãƒƒã‚¯ã®ä½¿ã„æ–¹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹", 
            "WordPressã®REST APIã‚’æ´»ç”¨ã—ãŸé–‹ç™ºæ‰‹æ³•",
            "WordPressãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºã®åŸºç¤çŸ¥è­˜",
            "WordPressãƒ†ãƒ¼ãƒé–‹ç™ºã§çŸ¥ã£ã¦ãŠãã¹ããƒã‚¤ãƒ³ãƒˆ"
        ]
    
    def generate_article(self, topic: Optional[str] = None, prompt_pack: str = "default") -> bool:
        """WordPressè¨˜äº‹ç”Ÿæˆï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å®Œå…¨å¯¾å¿œç‰ˆï¼‰"""
        try:
            if not topic:
                topic = random.choice(self.default_topics)
                logging.info(f"ğŸ“ WordPressãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒˆãƒ”ãƒƒã‚¯ä½¿ç”¨: {topic}")
            
            if prompt_pack != "default":
                # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯ã‹ã‚‰ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå–å¾—
                custom_prompt = self.prompt_manager.get_prompt(prompt_pack, "wordpress")
                logging.info(f"ğŸ¨ ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯ä½¿ç”¨: {prompt_pack}")
                return self._generate_with_custom_prompt(topic, custom_prompt)
            else:
                # æ—¢å­˜ã®é–¢æ•°ã‚’ç›´æ¥å‘¼ã³å‡ºã—ï¼ˆå¾Œæ–¹äº’æ›æ€§ï¼‰
                result = self.generate_function(topic)
                return result is not False
            
        except Exception as e:
            logging.error(f"âŒ WordPressè¨˜äº‹ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {e}")
            try:
                logging.info("ğŸ”„ ç’°å¢ƒå¤‰æ•°æ–¹å¼ã§å†è©¦è¡Œ...")
                original_topic = os.environ.get("SINGLE_TOPIC")
                os.environ["SINGLE_TOPIC"] = topic
                
                result = self.generate_function()
                
                if original_topic is not None:
                    os.environ["SINGLE_TOPIC"] = original_topic
                elif "SINGLE_TOPIC" in os.environ:
                    del os.environ["SINGLE_TOPIC"]
                
                return result is not False
                
            except Exception as e2:
                logging.error(f"âŒ ç’°å¢ƒå¤‰æ•°æ–¹å¼ã§ã‚‚å¤±æ•—: {e2}")
                return False


class JavaScriptGenerator(BaseGeneratorAdapter):
    """JavaScript ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å¯¾å¿œç‰ˆï¼‰"""
    
    def __init__(self):
        super().__init__("JavaScript")
        self.generate_function = js_generate
        
        self.default_topics = [
            "ES6+ã®æ–°æ©Ÿèƒ½ã¨ä½¿ã„æ–¹",
            "JavaScriptéåŒæœŸå‡¦ç†ã®åŸºæœ¬",
            "DOMæ“ä½œã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹",
            "Node.jså…¥é–€ã‚¬ã‚¤ãƒ‰",
            "TypeScriptåŸºç¤ã‹ã‚‰å®Ÿè·µã¾ã§"
        ]
    
    def generate_article(self, topic: Optional[str] = None, prompt_pack: str = "default") -> bool:
        """JavaScriptè¨˜äº‹ç”Ÿæˆï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å¯¾å¿œç‰ˆï¼‰"""
        try:
            if not topic:
                topic = random.choice(self.default_topics)
                logging.info(f"ğŸ“ JavaScriptãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒˆãƒ”ãƒƒã‚¯ä½¿ç”¨: {topic}")
            
            if prompt_pack != "default":
                custom_prompt = self.prompt_manager.get_prompt(prompt_pack, "javascript")
                logging.info(f"ğŸ¨ ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯ä½¿ç”¨: {prompt_pack}")
                return self._generate_with_custom_prompt(topic, custom_prompt)
            else:
                original_topic = os.environ.get("SINGLE_TOPIC")
                os.environ["SINGLE_TOPIC"] = topic
                
                result = self.generate_function()
                
                if original_topic is not None:
                    os.environ["SINGLE_TOPIC"] = original_topic
                elif "SINGLE_TOPIC" in os.environ:
                    del os.environ["SINGLE_TOPIC"]
                
                return result is not False
            
        except Exception as e:
            logging.error(f"âŒ JavaScriptè¨˜äº‹ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {e}")
            return False


class PythonGenerator(BaseGeneratorAdapter):
    """Python ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å¯¾å¿œç‰ˆï¼‰"""
    
    def __init__(self):
        super().__init__("Python")
        self.generate_function = py_generate
        
        self.default_topics = [
            "Pythonå…¥é–€è€…ã®ãŸã‚ã®åŸºæœ¬æ–‡æ³•",
            "Djangoã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªé–‹ç™ºã®åŸºç¤",
            "ãƒ‡ãƒ¼ã‚¿åˆ†æã®ãŸã‚ã®Pandaså…¥é–€",
            "Pythonè‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œã‚Šæ–¹",
            "FastAPI ã§REST APIæ§‹ç¯‰"
        ]
    
    def generate_article(self, topic: Optional[str] = None, prompt_pack: str = "default") -> bool:
        """Pythonè¨˜äº‹ç”Ÿæˆï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å¯¾å¿œç‰ˆï¼‰"""
        if not self.generate_function:
            logging.error("âŒ Python ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼é–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
            return False
        
        try:
            if not topic:
                topic = random.choice(self.default_topics)
                logging.info(f"ğŸ“ Pythonãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒˆãƒ”ãƒƒã‚¯ä½¿ç”¨: {topic}")
            
            if prompt_pack != "default":
                custom_prompt = self.prompt_manager.get_prompt(prompt_pack, "python")
                logging.info(f"ğŸ¨ ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯ä½¿ç”¨: {prompt_pack}")
                return self._generate_with_custom_prompt(topic, custom_prompt)
            else:
                original_topic = os.environ.get("SINGLE_TOPIC")
                os.environ["SINGLE_TOPIC"] = topic
                
                result = self.generate_function()
                
                if original_topic is not None:
                    os.environ["SINGLE_TOPIC"] = original_topic
                elif "SINGLE_TOPIC" in os.environ:
                    del os.environ["SINGLE_TOPIC"]
                
                return result is not False
            
        except Exception as e:
            logging.error(f"âŒ Pythonè¨˜äº‹ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {e}")
            return False


class ReactGenerator(BaseGeneratorAdapter):
    """React ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å¯¾å¿œç‰ˆï¼‰"""
    
    def __init__(self):
        super().__init__("React")
        self.generate_function = react_generate
        
        self.default_topics = [
            "React Hookså®Œå…¨ã‚¬ã‚¤ãƒ‰",
            "Next.jså…¥é–€ã‹ã‚‰å®Ÿè·µã¾ã§",
            "ReactçŠ¶æ…‹ç®¡ç†ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹",
            "Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³",
            "React Performanceã®æœ€é©åŒ–"
        ]
    
    def generate_article(self, topic: Optional[str] = None, prompt_pack: str = "default") -> bool:
        """Reactè¨˜äº‹ç”Ÿæˆï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å¯¾å¿œç‰ˆï¼‰"""
        if not self.generate_function:
            logging.error("âŒ React ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼é–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
            return False
        
        try:
            if not topic:
                topic = random.choice(self.default_topics)
                logging.info(f"ğŸ“ Reactãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒˆãƒ”ãƒƒã‚¯ä½¿ç”¨: {topic}")
            
            if prompt_pack != "default":
                custom_prompt = self.prompt_manager.get_prompt(prompt_pack, "react")
                logging.info(f"ğŸ¨ ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯ä½¿ç”¨: {prompt_pack}")
                return self._generate_with_custom_prompt(topic, custom_prompt)
            else:
                original_topic = os.environ.get("SINGLE_TOPIC")
                os.environ["SINGLE_TOPIC"] = topic
                
                result = self.generate_function()
                
                if original_topic is not None:
                    os.environ["SINGLE_TOPIC"] = original_topic
                elif "SINGLE_TOPIC" in os.environ:
                    del os.environ["SINGLE_TOPIC"]
                
                return result is not False
            
        except Exception as e:
            logging.error(f"âŒ Reactè¨˜äº‹ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {e}")
            return False


class VueGenerator(BaseGeneratorAdapter):
    """Vue.js ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å¯¾å¿œç‰ˆï¼‰"""
    
    def __init__(self):
        super().__init__("Vue.js")
        self.generate_function = vue_generate
        
        self.default_topics = [
            "Vue.js 3 Composition APIå…¥é–€",
            "Nuxt.js ã§SSRæ§‹ç¯‰",
            "Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆã®åŸºæœ¬",
            "Vue.jsçŠ¶æ…‹ç®¡ç†Vuex/Pinia",
            "Vueã§SPAé–‹ç™ºã®å®Ÿè·µ"
        ]
    
    def generate_article(self, topic: Optional[str] = None, prompt_pack: str = "default") -> bool:
        """Vue.jsè¨˜äº‹ç”Ÿæˆï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯å¯¾å¿œç‰ˆï¼‰"""
        if not self.generate_function:
            logging.error("âŒ Vue.js ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼é–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
            return False
        
        try:
            if not topic:
                topic = random.choice(self.default_topics)
                logging.info(f"ğŸ“ Vue.jsãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒˆãƒ”ãƒƒã‚¯ä½¿ç”¨: {topic}")
            
            if prompt_pack != "default":
                custom_prompt = self.prompt_manager.get_prompt(prompt_pack, "vue")
                logging.info(f"ğŸ¨ ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯ä½¿ç”¨: {prompt_pack}")
                return self._generate_with_custom_prompt(topic, custom_prompt)
            else:
                original_topic = os.environ.get("SINGLE_TOPIC")
                os.environ["SINGLE_TOPIC"] = topic
                
                result = self.generate_function()
                
                if original_topic is not None:
                    os.environ["SINGLE_TOPIC"] = original_topic
                elif "SINGLE_TOPIC" in os.environ:
                    del os.environ["SINGLE_TOPIC"]
                
                return result is not False
            
        except Exception as e:
            logging.error(f"âŒ Vue.jsè¨˜äº‹ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {e}")
            return False


# æ–°ã‚¸ãƒ£ãƒ³ãƒ«ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼
class CookingGenerator(BaseGeneratorAdapter):
    """æ–™ç†ãƒ»ãƒ¬ã‚·ãƒ” ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼"""
    
    def __init__(self):
        super().__init__("æ–™ç†ãƒ»ãƒ¬ã‚·ãƒ”")
        
        self.default_topics = [
            "ç°¡å˜ã§ç¾å‘³ã—ã„é¶è‚‰ã®ç…§ã‚Šç„¼ããƒ¬ã‚·ãƒ”",
            "30åˆ†ã§ä½œã‚Œã‚‹ãƒ‘ã‚¹ã‚¿ãƒ¬ã‚·ãƒ”é›†",
            "é‡èœãŸã£ã·ã‚Šãƒ˜ãƒ«ã‚·ãƒ¼ã‚µãƒ©ãƒ€ã®ä½œã‚Šæ–¹",
            "åˆå¿ƒè€…ã§ã‚‚å¤±æ•—ã—ãªã„ãƒãƒ³ãƒãƒ¼ã‚°ãƒ¬ã‚·ãƒ”",
            "ãŠå¼å½“ã«ã´ã£ãŸã‚Šãªä½œã‚Šç½®ããŠã‹ãš"
        ]
    
    def generate_article(self, topic: Optional[str] = None, prompt_pack: str = "cooking") -> bool:
        """æ–™ç†è¨˜äº‹ç”Ÿæˆ"""
        try:
            if not topic:
                topic = random.choice(self.default_topics)
                logging.info(f"ğŸ“ æ–™ç†ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒˆãƒ”ãƒƒã‚¯ä½¿ç”¨: {topic}")
            
            custom_prompt = self.prompt_manager.get_prompt(prompt_pack, "cooking")
            logging.info(f"ğŸ³ æ–™ç†ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯ä½¿ç”¨: {prompt_pack}")
            return self._generate_with_custom_prompt(topic, custom_prompt)
            
        except Exception as e:
            logging.error(f"âŒ æ–™ç†è¨˜äº‹ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {e}")
            return False


class TravelGenerator(BaseGeneratorAdapter):
    """æ—…è¡Œãƒ»è¦³å…‰ ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼"""
    
    def __init__(self):
        super().__init__("æ—…è¡Œãƒ»è¦³å…‰")
        
        self.default_topics = [
            "äº¬éƒ½ã®éš ã‚ŒãŸåæ‰€å·¡ã‚Š1æ—¥ãƒ—ãƒ©ãƒ³",
            "æ±äº¬è¿‘éƒŠã®æ—¥å¸°ã‚Šæ¸©æ³‰ã‚¹ãƒãƒƒãƒˆ",
            "æ²–ç¸„æ—…è¡Œã§çµ¶å¯¾é£Ÿã¹ãŸã„ã‚°ãƒ«ãƒ¡ã‚¬ã‚¤ãƒ‰",
            "åŒ—æµ·é“ã®çµ¶æ™¯ãƒ‰ãƒ©ã‚¤ãƒ–ã‚³ãƒ¼ã‚¹",
            "å¤§é˜ªã®é£Ÿã¹æ­©ããŠã™ã™ã‚ãƒ«ãƒ¼ãƒˆ"
        ]
    
    def generate_article(self, topic: Optional[str] = None, prompt_pack: str = "travel") -> bool:
        """æ—…è¡Œè¨˜äº‹ç”Ÿæˆ"""
        try:
            if not topic:
                topic = random.choice(self.default_topics)
                logging.info(f"ğŸ“ æ—…è¡Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒˆãƒ”ãƒƒã‚¯ä½¿ç”¨: {topic}")
            
            custom_prompt = self.prompt_manager.get_prompt(prompt_pack, "travel")
            logging.info(f"âœˆï¸ æ—…è¡Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ‘ãƒƒã‚¯ä½¿ç”¨: {prompt_pack}")
            return self._generate_with_custom_prompt(topic, custom_prompt)
            
        except Exception as e:
            logging.error(f"âŒ æ—…è¡Œè¨˜äº‹ç”Ÿæˆã‚¨ãƒ©ãƒ¼: {e}")
            return False


def get_generator(technology: str) -> BaseGeneratorAdapter:
    """æŒ‡å®šã•ã‚ŒãŸæŠ€è¡“ã®ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚’å–å¾—"""
    generators = {
        'wordpress': WordPressGenerator,
        'javascript': JavaScriptGenerator,
        'python': PythonGenerator,
        'react': ReactGenerator,
        'vue': VueGenerator,
        'cooking': CookingGenerator,
        'travel': TravelGenerator,
    }
    
    if technology not in generators:
        raise ValueError(f"æœªå¯¾å¿œã®æŠ€è¡“: {technology}")
    
    return generators[technology]()


if __name__ == "__main__":
    print("ğŸ§ª Generator Adapters ãƒ†ã‚¹ãƒˆï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹å®Œæˆç‰ˆï¼‰")
    print("=" * 60)
    
    try:
        wp_gen = WordPressGenerator()
        print(f"âœ… WordPress ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼åˆæœŸåŒ–æˆåŠŸ")
        
        cooking_gen = CookingGenerator()
        print(f"âœ… æ–™ç† ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼åˆæœŸåŒ–æˆåŠŸ")
        
    except Exception as e:
        print(f"âŒ ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚¨ãƒ©ãƒ¼: {e}")
    
    print("\nâœ… ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãƒ†ã‚¹ãƒˆå®Œäº†ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒãƒ¼ã‚±ãƒƒãƒˆãƒ—ãƒ¬ã‚¤ã‚¹å®Œæˆç‰ˆï¼‰")