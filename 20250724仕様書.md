WordPress Auto Generator System 改良仕様書
1. システム概要
目的: OpenAI を活用し、技術記事／テーマ記事を自動生成し、WordPress に直接公開する

特徴:

プロンプトパックによる「見出し」「トーン指示」「表現サンプル」の合成

フィードバックループによる自動品質評価・リライト

ペルソナ／季節／構成バリエーションの注入

マルチジャンル対応（テック、スポーツ、料理、旅行、マーケ、学問…等）

2. 高レベルアーキテクチャ
nginx
コピーする
編集する
CLI (main.py)
   └─ MainController
        ├─ LicenseManager        # ライセンス・利用制限管理
        ├─ PromptManager         # プロンプトパック読み込み
        ├─ ArticleGeneratorWrapper
        │    ├─ PromptBuilder    # prompts/packs 以下から messages を構築
        │    ├─ OpenAIClient     # build_messages → ChatCompletion
        │    ├─ FeedbackModule   # evaluate_content → リライト判定
        │    ├─ Personalize      # ペルソナ適用
        │    ├─ Emergent         # 季節・トレンド要素注入
        │    ├─ Variation        # 構成パターンランダム選択
        │    └─ WordPressPoster  # Markdown→HTML→WP REST API 投稿
        └─ その他機能（multi-tech, bulk_publish, tag_management…）
3. 強化ポイント
3.1 フィードバックループ（品質改善）
評価指標

可読性 (readability) → core/feedback.py: calculate_readability(text)

オリジナリティ (originality) → core/feedback.py: check_originality(text)

エンゲージメント (engagement) → core/feedback.py: analyze_engagement(text)

自動リライト

生成後にスコア算出

しきい値未満の指標がある場合、core/feedback.py: build_rewrite_prompt(text, scores) を呼び出し、再度 ChatCompletion

リライト版で再投稿

3.2 ペルソナ適用
--persona '{"age":25,"job":"OL","preferences":["時短","ヘルシー"]}'

core/personalize.py: apply_persona(text, persona_dict) →

「○○さん向け」「～な語り口」等を本文冒頭・末尾に注入

呼びかけフレーズ（「○○さん、ぜひお試しください！」）を記事末尾に追加

3.3 季節／トレンド要素注入
core/emergent.py: get_seasonal_note() →

現在時期に応じたワード（“夏にぴったり”“春の食材”）をランダムに本文中に組み込み

テーマ記事なら「今月の○○まとめ」などタイトル・見出しにも反映

3.4 構成パターンの多様化
core/variation.py: pick_structure() で下記などからランダム選択し、プロンプトへ注入

問題提起→解決策→具体例→まとめ

体験談→教訓→応用→行動促進

比較→分析→推奨→理由説明

選択されたパターンを headings.md のテンプレートにマージ

3.5 モデル設定の柔軟化
core/config.py に OPENAI_MODEL（デフォルト gpt-3.5-turbo）を追加

実行時に --model gpt-4 等オーバーライド可能に

3.6 プロンプトパックの拡張性
新ジャンル／新フォーマットを prompts/packs/<domain>/<category>/ 以下に追加

init_prompts.sh を改良し、任意のドメイン・サブカテゴリを一括生成

4. CLI インターフェース
bash
コピーする
編集する
# エントリ表示
python3 main.py --info

# プロンプトパック一覧
python3 main.py --list-prompts

# 技術記事 or テーマ記事生成
python3 main.py \
  --tech wordpress \                 # ドメイン or 技術名
  --count 3 \                        # 記事数
  --pack tech:wordpress \            # tech 記事型プロンプト
  --pack cooking:lunch \             # packing 複数指定可
  [--persona '<JSONペルソナ>'] \     # 任意
  [--model gpt-4] \                  # 任意
  [--no-feedback]                    # フィードバックループ無効化
5. ディレクトリ構成（例）
pgsql
コピーする
編集する
.
├─ core/
│   ├─ config.py
│   ├─ prompt_builder.py
│   ├─ feedback.py
│   ├─ personalize.py
│   ├─ emergent.py
│   ├─ variation.py
│   └─ wrapper.py
├─ modules/
│   └─ wordpress/
│       └─ generator.py
├─ prompts/
│   └─ packs/
│       ├─ tech/
│       │   └─ wordpress/
│       │       ├ headings.md
│       │       ├ instructions.md
│       │       └ samples.md
│       ├─ cooking/
│       │   └─ lunch/
│       │       ├ headings.md
│       │       ├ instructions.md
│       │       └ samples.md
│       └─ …（他ドメイン）…
├─ main.py
└─ init_prompts.sh
6. 成果物／今後の展開
即時実装

Feedback／Persona／Emergent／Variation モジュール統合

OPENAI_MODEL ログ出力対応

中期ロードマップ

多ジャンル対応ジェネレーターアダプター追加

マルチ技術記事（multi-tech）・一括公開機能強化

長期ビジョン

過去パフォーマンス解析によるプロンプト最適化自動化

ダッシュボード連携による生成統計レポート

